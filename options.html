<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configura√ß√µes ‚Ä¢ SEI Smart</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main>
      <div class="header">
        <h1>‚öôÔ∏è SEI Smart - Configura√ß√µes</h1>
        <p class="subtitle">
          Configure a API OpenAI para gerar respostas inteligentes nos seus despachos do SEI.
          Suas credenciais ficam armazenadas localmente no navegador.
        </p>
      </div>

      <!-- Sistema de Abas -->
      <div class="tabs-container">
        <div class="tabs-header" role="tablist" aria-label="Configura√ß√µes SEI Smart">
          <button class="tab-button" id="tab-disclaimer" role="tab" aria-selected="false" aria-controls="disclaimer-tab" data-tab="disclaimer">üîí Pol√≠tica de uso respons√°vel</button>
          <button class="tab-button" id="tab-documents" role="tab" aria-selected="false" aria-controls="documents-tab" data-tab="documents">üìÑ Estrutura do √ìrg√£o</button>
          <button class="tab-button" id="tab-document-models" role="tab" aria-selected="false" aria-controls="document-models-tab" data-tab="document-models">üìù Modelos</button>
          <button class="tab-button active" id="tab-ai-model" role="tab" aria-selected="true" aria-controls="ai-model-tab" data-tab="ai-model">ü§ñ Modelo de IA</button>
        </div>

        <form id="settingsForm">
          <!-- Aba: Configura√ß√µes do Modelo de IA -->
          <div class="tab-content active" id="ai-model-tab" role="tabpanel" aria-labelledby="tab-ai-model" tabindex="0">
            <div class="form-section">
              <h2 class="section-title">üìò Dicas para configurar a API</h2>
              <div class="api-tips" id="apiTipsContent">
                <div id="plataformAI_info" style="white-space: break-spaces;color: #616161;">
                  <div class="alertaAttencionPro dialogBoxDiv" style="font-size: 11pt;line-height: 12pt;color: #616161;">
                    <span style="margin-right: 5px;">‚ÑπÔ∏è</span> Aproveite todo o potencial da intelig√™ncia artificial do <a href="https://chat.openai.com/chat" class="linkDialog" style="font-style: italic;font-size: 11pt;" target="_blank">ChatGPT</a> diretamente no editor de documentos do SEI. <br><br><span style="margin-left: 20px;"></span>Siga o passo-a-passo abaixo para cadastrar suas credenciais de acesso:<br><br>
                  </div>
                  <div class="alertaAttencionPro dialogBoxDiv" style="margin-left:20px;font-size: 11pt;line-height: 12pt;color: #616161;">
                    1. Acesse o site da OpenAI (<a href="https://platform.openai.com/" class="linkDialog" style="font-style: italic;font-size: 11pt;" target="_blank">https://platform.openai.com/</a>) e clique em "Sign Up" no canto superior direito da tela.<br><br>
                    2. Preencha o formul√°rio de cadastro ou use Google/Microsoft.<br><br>
                    3. Verifique seu e-mail e confirme o cadastro.<br><br>
                    4. Insira seu n√∫mero de celular e confirme por SMS.<br><br>
                    5. Fa√ßa login e v√° em "API Keys".<br><br>
                    6. Clique em "Create new secret key" para gerar sua chave.<br><br>
                    7. Guarde a chave com seguran√ßa (ela s√≥ aparece uma vez).<br><br>
                    8. Em "Billing", adicione pagamento se necess√°rio. Consulte pre√ßos: <a href="https://openai.com/pricing" target="_blank">https://openai.com/pricing</a><br><br>
                    9. Cole a chave na aba ü§ñ (Chave da API OpenAI).<br><br>
                  </div>
                </div>
              </div>
            </div>            
            
            <div class="form-section">
              <h2 class="section-title">üîê Autentica√ß√£o</h2>
              
              <div class="form-group">
                <label for="apiKey">Chave da API OpenAI</label>
                <input
                  type="password"
                  id="apiKey"
                  name="apiKey"
                  placeholder="sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxx"
                  autocomplete="off"
                  required
                />
                <p class="field-hint">Obtenha sua chave em <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a></p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">ü§ñ Par√¢metros do Modelo</h2>
              
              <div class="form-group">
                <label for="model">Modelo de IA</label>
                <select id="model" name="model" required>
                  <option value="gpt-4o">GPT-4o (Recomendado - Mais r√°pido e eficiente)</option>
                  <option value="gpt-4o-mini">GPT-4o Mini (Econ√¥mico e r√°pido)</option>
                  <option value="gpt-4-turbo">GPT-4 Turbo (Alto desempenho)</option>
                  <option value="gpt-4">GPT-4 (M√°xima qualidade)</option>
                  <option value="gpt-3.5-turbo">GPT-3.5 Turbo (R√°pido e econ√¥mico)</option>
                  <option value="gpt-3.5-turbo-16k">GPT-3.5 Turbo 16k (Textos longos)</option>
                </select>
                <p class="field-hint">Modelos mais avan√ßados geram respostas melhores, mas custam mais</p>
              </div>

              <div class="form-group">
                <label for="temperature">
                  Temperatura (Criatividade)
                  <span class="temp-value" id="tempValue">0.2</span>
                </label>
                <input
                  type="range"
                  id="temperature"
                  name="temperature"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.2"
                  required
                />
                <div class="range-labels">
                  <span>Mais preciso</span>
                  <span>Mais criativo</span>
                </div>
                <p class="field-hint">Valores baixos geram respostas mais consistentes e objetivas</p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">üé® Interface</h2>
              
              <label class="checkbox-row" for="floatingButtonEnabled">
                <input
                  type="checkbox"
                  id="floatingButtonEnabled"
                  name="floatingButtonEnabled"
                  checked
                />
                <span>Mostrar bot√£o flutuante nas janelas do SEI</span>
              </label>
              <p class="field-hint">O bot√£o permite acessar a extens√£o sem depender da barra do navegador</p>
            </div>
          </div>

          <!-- Aba: Informa√ß√µes sobre Documentos -->
          <div class="tab-content" id="documents-tab" role="tabpanel" aria-labelledby="tab-documents" tabindex="-1">
            <div class="form-section">
              <h2 class="section-title">üë§ Dados do Signat√°rio</h2>
              
              <div class="form-group">
                <label for="signatarioNome">Nome Completo do Signat√°rio</label>
                <input
                  type="text"
                  id="signatarioNome"
                  name="signatarioNome"
                  placeholder="Ex: Jo√£o Silva Santos"
                  autocomplete="off"
                />
                <p class="field-hint">Nome que aparecer√° no final dos documentos</p>
              </div>

              <div class="form-group">
                <label for="signatarioCargo">Cargo do Signat√°rio</label>
                <input
                  type="text"
                  id="signatarioCargo"
                  name="signatarioCargo"
                  placeholder="Ex: Assessor Administrativo"
                  autocomplete="off"
                />
                <p class="field-hint">Cargo que aparecer√° abaixo do nome, ex: Secret√°rio Adjunto de Transpar√™ncia</p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">üèõÔ∏è Estrutura do √ìrg√£o</h2>
              
              <div class="form-group">
                <label for="orgaoNome">Nome do √ìrg√£o</label>
                <input
                  type="text"
                  id="orgaoNome"
                  name="orgaoNome"
                  placeholder="Ex: Secretaria de Estado de Transpar√™ncia e Controle"
                  autocomplete="off"
                />
                <p class="field-hint">√ìrg√£o do Governo do Estado do Maranh√£o onde voc√™ trabalha. Ex: Secretaria de Estado de Transpar√™ncia e Controle</p>
              </div>

              <div class="form-group">
                <label for="orgaoSetores">Setores e Gestores</label>
                <textarea
                  id="orgaoSetores"
                  name="orgaoSetores"
                  rows="5"
                  placeholder="Liste os setores e seus gestores, um por linha.&#10;Formato: Nome do Setor - Nome do Gestor&#10;&#10;Exemplos:&#10;Secretaria Adjunta de Transpar√™ncia - SEATRAN/STC - Maria Silva Costa&#10;Gabinete do Secret√°rio - Jo√£o Santos Oliveira&#10;Coordenadoria de Controle Interno - Pedro Costa"
                  autocomplete="off"
                ></textarea>
                <p class="field-hint">
                  <strong>Formato:</strong> Nome do Setor - Nome do Gestor (um por linha)<br>
                  Exemplo: 
                  <br>Secretaria de Transparencia e Controle - Raul Cancian Mochel
                  <br>Chefe de Gabinete - Bruna Teles Maciel Storto
                  <br>Secretaria de Administra√ß√£o e finan√ßas - Danielle Mesquita de Fran√ßa Sousa
                  <br>Auditoria Geral do Estado - Luana de Jesus Pereira
                  <br>Corregedoria Geral do Estado - Daniel Barros
                  <br>Ouvidoria Geral do Estado - Marco Aur√©lio Tavares Santiago Filho
                </p>
              </div>
            </div>
          </div>


          <!-- Aba: Modelos de Documentos -->
          <div class="tab-content" id="document-models-tab" role="tabpanel" aria-labelledby="tab-document-models" tabindex="-1">
            <div class="form-section">
              <h2 class="section-title">üìù Modelos de Documentos</h2>
              <p class="field-hint">Gerencie os modelos padr√£o e crie modelos personalizados</p>
              
              <div class="default-models">
                <h3>üìã Modelos Padr√£o</h3>
                <p class="field-hint">Estes s√£o os modelos b√°sicos inclu√≠dos na extens√£o:</p>
                
                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìÑ Despacho Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="despacho-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

DESPACHO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>

                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìã Of√≠cio Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="oficio-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

OF√çCIO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>

                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìù Memorando Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="memorando-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

MEMORANDO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>
              </div>

              <div class="custom-models">
                <h3>‚úèÔ∏è Modelos Personalizados</h3>
                <p class="field-hint">Crie e gerencie seus modelos personalizados de documentos</p>
              
              <div class="models-container">
                <div class="models-list" id="modelsList">
                  <!-- Lista de modelos ser√° preenchida dinamicamente -->
                </div>
                
                <div class="model-form" id="modelForm" style="display: none;">
                  <h3>üìù Novo Modelo de Documento</h3>
                  
                  <div class="form-group">
                    <label for="modelName">Nome do Modelo</label>
                    <input
                      type="text"
                      id="modelName"
                      name="modelName"
                      placeholder="Ex: Despacho Padr√£o, Of√≠cio Formal, etc."
                      autocomplete="off"
                    />
                    <p class="field-hint">Nome identificador para o modelo</p>
                  </div>

                  <div class="form-group">
                    <label for="modelText">Texto do Modelo</label>
                    <textarea
                      id="modelText"
                      name="modelText"
                      rows="12"
                      placeholder="Digite o texto do modelo aqui...&#10;&#10;Use vari√°veis como:&#10;{PROCESSO} - N√∫mero do processo&#10;{ASSUNTO} - Assunto do processo&#10;{DESTINATARIO} - Destinat√°rio&#10;{CONTEUDO} - Conte√∫do principal&#10;{DATA} - Data atual&#10;{SIGNATARIO} - Nome do signat√°rio&#10;{CARGO} - Cargo do signat√°rio"
                      autocomplete="off"
                    ></textarea>
                    <p class="field-hint">
                      <strong>Vari√°veis dispon√≠veis:</strong><br>
                      <code>{PROCESSO}</code> - N√∫mero do processo<br>
                      <code>{ASSUNTO}</code> - Assunto do processo<br>
                      <code>{DESTINATARIO}</code> - Destinat√°rio<br>
                      <code>{CONTEUDO}</code> - Conte√∫do principal<br>
                      <code>{DATA}</code> - Data atual<br>
                      <code>{SIGNATARIO}</code> - Nome do signat√°rio<br>
                      <code>{CARGO}</code> - Cargo do signat√°rio
                    </p>
                  </div>

                  <div class="model-actions">
                    <button type="button" class="btn-secondary" id="cancelModel">‚ùå Cancelar</button>
                    <button type="button" class="btn-primary" id="saveModel">üíæ Salvar Modelo</button>
                  </div>
                </div>

                <div class="add-model-section">
                  <button type="button" class="btn-add" id="addModelBtn">
                    ‚ûï Adicionar Novo Modelo
                  </button>
                </div>
              </div>
            </div>
          </div>
          </div>

          <!-- Aba: Disclaimer e Dicas da API -->
          <div class="tab-content" id="disclaimer-tab" role="tabpanel" aria-labelledby="tab-disclaimer" tabindex="-1">
            <div class="form-section">
              <h2 class="section-title">üîí Aviso de Uso Respons√°vel</h2>
              <div class="disclaimer-box" id="disclaimerContent">
                <table role="presentation" cellspacing="0" border="0" style="width:100%;float:none;" align="left">
                  <tbody>
                    <tr>
                      <td role="presentation" class="cke_dialog_ui_vbox_child">
                        <div class="editorTextDisclaimer">
                          <p><strong>Diretrizes para o uso respons√°vel de ferramentas de Intelig√™ncia Artificial</strong></p>
                          <p>1. Evite empregar IA em contextos sens√≠veis ou cr√≠ticos.
                          <br>Ferramentas automatizadas n√£o devem ser utilizadas em situa√ß√µes que envolvam dados sigilosos, informa√ß√µes estrat√©gicas ou decis√µes que possam gerar impacto administrativo, jur√≠dico ou institucional relevante.
                          </p>
                          <p>2. Mantenha sempre a supervis√£o humana.
                          <br>As respostas geradas por sistemas de IA devem ser analisadas, validadas e complementadas por profissionais respons√°veis, assegurando corre√ß√£o e adequa√ß√£o ao contexto de uso.
                          </p>
                          <p>3. A responsabilidade √© de quem assina.
                          <br>Todo documento, parecer ou comunica√ß√£o produzida com apoio de IA deve ser conferido e assumido integralmente pelo signat√°rio, que responde pelo conte√∫do final.
                          </p>
                          <p>4. Compreenda as limita√ß√µes do modelo.
                          <br>As respostas s√£o baseadas em conte√∫dos previamente dispon√≠veis na internet ou em bases p√∫blicas. Quando o contexto fornecido √© insuficiente ou impreciso, o resultado pode ser inadequado e levar a interpreta√ß√µes equivocadas.
                          </p>
                          <p>5. Conhe√ßa os riscos e adote precau√ß√µes.
                          <br>O uso indevido da IA pode gerar falhas, comprometer a seguran√ßa da informa√ß√£o ou produzir efeitos legais indesejados. Utilize a ferramenta com discernimento e dentro dos limites √©ticos e normativos.
                          </p>
                          <p>6. Verifique a conformidade antes da utiliza√ß√£o.
                          <br>Antes de empregar qualquer sistema de IA, confirme se ele est√° em conformidade com as normas internas sobre o uso seguro de tecnologias e computa√ß√£o em nuvem do seu √≥rg√£o ou institui√ß√£o.                       
                        </div> 
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <label class="checkbox-row" for="cienteDisclaimer">
                <input type="checkbox" id="cienteDisclaimer" name="cienteDisclaimer" />
                <span>Estou ciente e entendo os riscos</span>
              </label>
            </div>


          </div>

        </form>
      </div>

      <!-- Bot√£o salvar fora do container das abas -->
      <div class="form-actions">
        <button type="submit" form="settingsForm" class="btn-primary">üíæ Salvar configura√ß√µes</button>
        <p id="saveStatus" role="status" aria-live="polite"></p>
      </div>

    </main>
    <style>
      /* Garantir que o bot√£o salvar seja sempre vis√≠vel */
      .form-actions {
        margin-top: 2rem !important;
        padding: 1.5rem !important;
        text-align: center !important;
        background: #ffffff !important;
        border-radius: 12px !important;
        /* Removido: borda azul */
        border: none !important;
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15) !important;
        position: relative !important;
        z-index: 1000 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
        align-items: center !important;
        width: 100% !important;
        max-width: 680px !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }
      
      .btn-primary {
        background: #007bff !important;
        color: white !important;
        border: none !important;
        padding: 16px 32px !important;
        border-radius: 8px !important;
        font-size: 18px !important;
        font-weight: 700 !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        min-width: 250px !important;
        display: inline-block !important;
        visibility: visible !important;
        opacity: 1 !important;
        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
        position: relative !important;
        z-index: 1001 !important;
      }
      
      
      .btn-primary:hover {
        background: #0056b3 !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 16px rgba(0, 123, 255, 0.4) !important;
      }
      
      .btn-primary:active {
        transform: translateY(0) !important;
        box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3) !important;
      }
      .btn-primary:focus { outline: none !important; }
      
      #saveStatus {
        margin-top: 1rem;
        font-weight: 500;
        min-height: 1.5em;
      }
    </style>
    <script type="module" src="options.js"></script>
  </body>
</html>
