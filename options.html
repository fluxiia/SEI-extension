<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configura√ß√µes ‚Ä¢ SEI Smart</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <main>
      <div class="header">
        <h1>‚öôÔ∏è SEI Smart - Configura√ß√µes</h1>
        <p class="subtitle">
          Configure a API OpenAI para gerar respostas inteligentes nos seus despachos do SEI.
          Suas credenciais ficam armazenadas localmente no navegador.
        </p>
      </div>

      <!-- Sistema de Abas -->
      <div class="tabs-container">
        <div class="tabs-header">
          <button class="tab-button" data-tab="documents">üìÑ Estrutura do √ìrg√£o</button>
          <button class="tab-button" data-tab="document-models">üìù Modelos</button>
          <button class="tab-button active" data-tab="ai-model">ü§ñ Modelo de IA</button>
        </div>

        <form id="settingsForm">
          <!-- Aba: Configura√ß√µes do Modelo de IA -->
          <div class="tab-content active" id="ai-model-tab">
            <div class="form-section">
              <h2 class="section-title">üîê Autentica√ß√£o</h2>
              
              <div class="form-group">
                <label for="apiKey">Chave da API OpenAI</label>
                <input
                  type="password"
                  id="apiKey"
                  name="apiKey"
                  placeholder="sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxx"
                  autocomplete="off"
                  required
                />
                <p class="field-hint">Obtenha sua chave em <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a></p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">ü§ñ Par√¢metros do Modelo</h2>
              
              <div class="form-group">
                <label for="model">Modelo de IA</label>
                <select id="model" name="model" required>
                  <option value="gpt-4o">GPT-4o (Recomendado - Mais r√°pido e eficiente)</option>
                  <option value="gpt-4o-mini">GPT-4o Mini (Econ√¥mico e r√°pido)</option>
                  <option value="gpt-4-turbo">GPT-4 Turbo (Alto desempenho)</option>
                  <option value="gpt-4">GPT-4 (M√°xima qualidade)</option>
                  <option value="gpt-3.5-turbo">GPT-3.5 Turbo (R√°pido e econ√¥mico)</option>
                  <option value="gpt-3.5-turbo-16k">GPT-3.5 Turbo 16k (Textos longos)</option>
                </select>
                <p class="field-hint">Modelos mais avan√ßados geram respostas melhores, mas custam mais</p>
              </div>

              <div class="form-group">
                <label for="temperature">
                  Temperatura (Criatividade)
                  <span class="temp-value" id="tempValue">0.2</span>
                </label>
                <input
                  type="range"
                  id="temperature"
                  name="temperature"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.2"
                  required
                />
                <div class="range-labels">
                  <span>Mais preciso</span>
                  <span>Mais criativo</span>
                </div>
                <p class="field-hint">Valores baixos geram respostas mais consistentes e objetivas</p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">üé® Interface</h2>
              
              <label class="checkbox-row" for="floatingButtonEnabled">
                <input
                  type="checkbox"
                  id="floatingButtonEnabled"
                  name="floatingButtonEnabled"
                  checked
                />
                <span>Mostrar bot√£o flutuante nas janelas do SEI</span>
              </label>
              <p class="field-hint">O bot√£o permite acessar a extens√£o sem depender da barra do navegador</p>
            </div>
          </div>

          <!-- Aba: Informa√ß√µes sobre Documentos -->
          <div class="tab-content" id="documents-tab">
            <div class="form-section">
              <h2 class="section-title">üë§ Dados do Signat√°rio</h2>
              
              <div class="form-group">
                <label for="signatarioNome">Nome Completo do Signat√°rio</label>
                <input
                  type="text"
                  id="signatarioNome"
                  name="signatarioNome"
                  placeholder="Ex: Jo√£o Silva Santos"
                  autocomplete="off"
                />
                <p class="field-hint">Nome que aparecer√° no final dos documentos</p>
              </div>

              <div class="form-group">
                <label for="signatarioCargo">Cargo do Signat√°rio</label>
                <input
                  type="text"
                  id="signatarioCargo"
                  name="signatarioCargo"
                  placeholder="Ex: Assessor Administrativo"
                  autocomplete="off"
                />
                <p class="field-hint">Cargo que aparecer√° abaixo do nome, ex: Secret√°rio Adjunto de Transpar√™ncia</p>
              </div>
            </div>

            <div class="form-section">
              <h2 class="section-title">üèõÔ∏è Estrutura do √ìrg√£o</h2>
              
              <div class="form-group">
                <label for="orgaoNome">Nome do √ìrg√£o</label>
                <input
                  type="text"
                  id="orgaoNome"
                  name="orgaoNome"
                  placeholder="Ex: Secretaria de Estado de Transpar√™ncia e Controle"
                  autocomplete="off"
                />
                <p class="field-hint">√ìrg√£o do Governo do Estado do Maranh√£o onde voc√™ trabalha. Ex: Secretaria de Estado de Transpar√™ncia e Controle</p>
              </div>

              <div class="form-group">
                <label for="orgaoSetores">Setores e Gestores</label>
                <textarea
                  id="orgaoSetores"
                  name="orgaoSetores"
                  rows="5"
                  placeholder="Liste os setores e seus gestores, um por linha.&#10;Formato: Nome do Setor - Nome do Gestor&#10;&#10;Exemplos:&#10;Secretaria Adjunta de Transpar√™ncia - SEATRAN/STC - Maria Silva Costa&#10;Gabinete do Secret√°rio - Jo√£o Santos Oliveira&#10;Coordenadoria de Controle Interno - Pedro Costa"
                  autocomplete="off"
                ></textarea>
                <p class="field-hint">
                  <strong>Formato:</strong> Nome do Setor - Nome do Gestor (um por linha)<br>
                  Exemplo: 
                  <br>Secretaria de Transparencia e Controle - Raul Cancian Mochel
                  <br>Chefe de Gabinete - Bruna Teles Maciel Storto
                  <br>Secretaria de Administra√ß√£o e finan√ßas - Danielle Mesquita de Fran√ßa Sousa
                  <br>Auditoria Geral do Estado - Luana de Jesus Pereira
                  <br>Corregedoria Geral do Estado - Daniel Barros
                  <br>Ouvidoria Geral do Estado - Marco Aur√©lio Tavares Santiago Filho
                </p>
              </div>
            </div>
          </div>


          <!-- Aba: Modelos de Documentos -->
          <div class="tab-content" id="document-models-tab">
            <div class="form-section">
              <h2 class="section-title">üìù Modelos de Documentos</h2>
              <p class="field-hint">Gerencie os modelos padr√£o e crie modelos personalizados</p>
              
              <div class="default-models">
                <h3>üìã Modelos Padr√£o</h3>
                <p class="field-hint">Estes s√£o os modelos b√°sicos inclu√≠dos na extens√£o:</p>
                
                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìÑ Despacho Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="despacho-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

DESPACHO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>

                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìã Of√≠cio Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="oficio-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

OF√çCIO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>

                <div class="model-item default-model">
                  <div class="model-header">
                    <h4>üìù Memorando Padr√£o</h4>
                    <div class="model-actions">
                      <button class="btn-edit-default" data-model="memorando-padrao">‚úèÔ∏è Editar</button>
                      <span class="model-status">Padr√£o</span>
                    </div>
                  </div>
                  <div class="model-preview">
                    <pre>Processo n¬∫: {PROCESSO}
Assunto: {ASSUNTO}

MEMORANDO N¬∫ {NUMERO}

Ao {DESTINATARIO},

{CONTEUDO}

S√£o Lu√≠s/MA, {DATA}.

Atenciosamente,

{SIGNATARIO}
{CARGO}</pre>
                  </div>
                </div>
              </div>

              <div class="custom-models">
                <h3>‚úèÔ∏è Modelos Personalizados</h3>
                <p class="field-hint">Crie e gerencie seus modelos personalizados de documentos</p>
              
              <div class="models-container">
                <div class="models-list" id="modelsList">
                  <!-- Lista de modelos ser√° preenchida dinamicamente -->
                </div>
                
                <div class="model-form" id="modelForm" style="display: none;">
                  <h3>üìù Novo Modelo de Documento</h3>
                  
                  <div class="form-group">
                    <label for="modelName">Nome do Modelo</label>
                    <input
                      type="text"
                      id="modelName"
                      name="modelName"
                      placeholder="Ex: Despacho Padr√£o, Of√≠cio Formal, etc."
                      autocomplete="off"
                    />
                    <p class="field-hint">Nome identificador para o modelo</p>
                  </div>

                  <div class="form-group">
                    <label for="modelText">Texto do Modelo</label>
                    <textarea
                      id="modelText"
                      name="modelText"
                      rows="12"
                      placeholder="Digite o texto do modelo aqui...&#10;&#10;Use vari√°veis como:&#10;{PROCESSO} - N√∫mero do processo&#10;{ASSUNTO} - Assunto do processo&#10;{DESTINATARIO} - Destinat√°rio&#10;{CONTEUDO} - Conte√∫do principal&#10;{DATA} - Data atual&#10;{SIGNATARIO} - Nome do signat√°rio&#10;{CARGO} - Cargo do signat√°rio"
                      autocomplete="off"
                    ></textarea>
                    <p class="field-hint">
                      <strong>Vari√°veis dispon√≠veis:</strong><br>
                      <code>{PROCESSO}</code> - N√∫mero do processo<br>
                      <code>{ASSUNTO}</code> - Assunto do processo<br>
                      <code>{DESTINATARIO}</code> - Destinat√°rio<br>
                      <code>{CONTEUDO}</code> - Conte√∫do principal<br>
                      <code>{DATA}</code> - Data atual<br>
                      <code>{SIGNATARIO}</code> - Nome do signat√°rio<br>
                      <code>{CARGO}</code> - Cargo do signat√°rio
                    </p>
                  </div>

                  <div class="model-actions">
                    <button type="button" class="btn-secondary" id="cancelModel">‚ùå Cancelar</button>
                    <button type="button" class="btn-primary" id="saveModel">üíæ Salvar Modelo</button>
                  </div>
                </div>

                <div class="add-model-section">
                  <button type="button" class="btn-add" id="addModelBtn">
                    ‚ûï Adicionar Novo Modelo
                  </button>
                </div>
              </div>
            </div>
          </div>

        </form>
      </div>

      <!-- Bot√£o salvar fora do container das abas -->
      <div class="form-actions">
        <button type="submit" form="settingsForm" class="btn-primary">üíæ Salvar configura√ß√µes</button>
        <p id="saveStatus" role="status" aria-live="polite"></p>
      </div>

    </main>
    <style>
      /* Garantir que o bot√£o salvar seja sempre vis√≠vel */
      .form-actions {
        margin-top: 2rem !important;
        padding: 1.5rem !important;
        text-align: center !important;
        background: #ffffff !important;
        border-radius: 12px !important;
        border: 2px solid #007bff !important;
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.15) !important;
        position: relative !important;
        z-index: 1000 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
        align-items: center !important;
        width: 100% !important;
        max-width: 680px !important;
        margin-left: auto !important;
        margin-right: auto !important;
      }
      
      .btn-primary {
        background: #007bff !important;
        color: white !important;
        border: none !important;
        padding: 16px 32px !important;
        border-radius: 8px !important;
        font-size: 18px !important;
        font-weight: 700 !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        min-width: 250px !important;
        display: inline-block !important;
        visibility: visible !important;
        opacity: 1 !important;
        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
        position: relative !important;
        z-index: 1001 !important;
      }
      
      
      .btn-primary:hover {
        background: #0056b3 !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 16px rgba(0, 123, 255, 0.4) !important;
      }
      
      .btn-primary:active {
        transform: translateY(0) !important;
        box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3) !important;
      }
      
      #saveStatus {
        margin-top: 1rem;
        font-weight: 500;
        min-height: 1.5em;
      }
    </style>
    <script type="module" src="options.js"></script>
  </body>
</html>
